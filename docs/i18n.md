# yumicuit 多言語対応

## 方針

- 最初から英語対応
- i18n辞書形式で管理
- 日本語と英語を同時にサポート

## 辞書構造

```typescript
// src/lib/i18n/index.ts

type Locale = 'ja' | 'en';

interface Messages {
  // 就寝前モード
  seeds: {
    title: string;        // 夢の種 / Dream Seeds
  };

  // ふりかえりモード（昼）
  review: {
    generate: string;     // 生成 / Generate
    regenerate: string;   // やり直し / Regenerate
    confirm: string;      // これだ / This is it
    force: string;        // 強引さ / Creativity
    focus: string;        // 連想方向 / Focus
    focusOptions: {
      place: string;      // 場所 / Place
      person: string;     // 人物 / Person
      emotion: string;    // 感情 / Emotion
      color: string;      // 色彩 / Color
      sound: string;      // 音 / Sound
    };
  };

  // 設定（昼のみアクセス可能）
  settings: {
    title: string;        // 設定 / Settings
    language: string;     // 言語 / Language
    model: string;        // AIモデル / AI Model
    downloadModel: string; // モデルをダウンロード / Download Model
  };

  // エラー
  errors: {
    saveFailed: string;   // 保存に失敗しました / Failed to save
    generateFailed: string; // 生成に失敗しました / Generation failed
    modelNotReady: string;  // モデルの準備ができていません / Model not ready
  };
}
```

## 辞書ファイル

### 日本語 (ja.ts)

```typescript
export const ja: Messages = {
  seeds: {
    title: '夢の種',
  },
  review: {
    generate: '生成',
    regenerate: 'やり直し',
    confirm: 'これだ',
    force: '強引さ',
    focus: '連想方向',
    focusOptions: {
      place: '場所',
      person: '人物',
      emotion: '感情',
      color: '色彩',
      sound: '音',
    },
  },
  settings: {
    title: '設定',
    language: '言語',
    model: 'AIモデル',
    downloadModel: 'モデルをダウンロード',
  },
  errors: {
    saveFailed: '保存に失敗しました',
    generateFailed: '生成に失敗しました',
    modelNotReady: 'モデルの準備ができていません',
  },
};
```

### 英語 (en.ts)

```typescript
export const en: Messages = {
  seeds: {
    title: 'Dream Seeds',
  },
  review: {
    generate: 'Generate',
    regenerate: 'Regenerate',
    confirm: 'This is it',
    force: 'Creativity',
    focus: 'Focus',
    focusOptions: {
      place: 'Place',
      person: 'Person',
      emotion: 'Emotion',
      color: 'Color',
      sound: 'Sound',
    },
  },
  settings: {
    title: 'Settings',
    language: 'Language',
    model: 'AI Model',
    downloadModel: 'Download Model',
  },
  errors: {
    saveFailed: 'Failed to save',
    generateFailed: 'Generation failed',
    modelNotReady: 'Model not ready',
  },
};
```

## 使用方法

```typescript
import { useI18n } from '@/lib/i18n';

function ReviewPage() {
  const { t } = useI18n();

  return (
    <button>{t.review.generate}</button>
  );
}
```

## 言語検出

1. ユーザー設定（IndexedDBに保存）
2. ブラウザの言語設定（`navigator.language`）
3. デフォルト: 'en'

```typescript
function detectLocale(): Locale {
  const saved = getSavedLocale();
  if (saved) return saved;

  const browserLang = navigator.language.split('-')[0];
  if (browserLang === 'ja') return 'ja';

  return 'en';
}
```

## 朝モードでの多言語

朝モードにはテキストがほぼない（入力欄のみ）ので、
多言語対応の影響は最小限。

プレースホルダーも不要（何も表示しない）。

## 将来の拡張

- 中国語（zh）
- 韓国語（ko）
- スペイン語（es）
- フランス語（fr）

需要に応じて追加。辞書形式なので追加は容易。
